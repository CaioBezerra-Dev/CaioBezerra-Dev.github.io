<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nosso Ponto de Partida</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Montserrat:wght@700&display=swap');
        body{font-family:'Lora',serif;background-color:#0a192f;color:#e6f1ff;margin:0;padding:0;overflow:hidden;display:flex;justify-content:center;align-items:center;min-height:100vh;position:relative}
        .star-field{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2}
        .star{position:absolute;background-color:white;border-radius:50%;opacity:0;animation:twinkle 2s infinite alternate}
        @keyframes twinkle{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}
        .airplane{position:fixed;top:15%;width:120px;height:40px;z-index:0;animation:fly-across 25s linear infinite;cursor:pointer;}
        @keyframes fly-across{0%{left:-150px;transform:rotate(-15deg)}100%{left:110%;transform:rotate(-25deg)}}
        .airplane .fuselage{position:absolute;top:15px;left:0;width:100%;height:10px;background:linear-gradient(to top,#c0c0c0,#eaeaea);border-radius:30% 50% 50% 30% / 50%}
        .airplane .cockpit{position:absolute;top:12px;right:5px;width:18px;height:14px;background:#87ceeb;border-radius:50%;transform:rotate(10deg)}
        .airplane .left-wing,.airplane .right-wing{position:absolute;background-color:#b0b0b0;width:55px;height:10px;left:30px;border-radius:5px}
        .airplane .left-wing{top:10px;transform:rotate(25deg)}
        .airplane .right-wing{top:20px;transform:rotate(-25deg)}
        .airplane .tail-vertical{position:absolute;left:0;top:8px;width:10px;height:20px;background-color:#a0a0a0;clip-path:polygon(0 0,100% 100%,0% 100%)}
        .airplane .tail-horizontal{position:absolute;left:5px;top:20px;width:15px;height:6px;background-color:#a0a0a0;border-radius:2px;transform:rotate(10deg)}
        .container{max-width:800px;margin:2rem;padding:2.5rem 3rem;background-color:rgba(17,34,64,.85);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.4);text-align:center;border:1px solid rgba(100,149,237,.3);backdrop-filter:blur(5px);animation:fadeIn 2s ease-in-out;position:relative;z-index:1;max-height:90vh;overflow-y:auto}
        @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
        .hidden{display:none}
        #proposal-container .content p,#loading-message{font-size:1.1rem;line-height:1.8;text-align:left;margin-bottom:1.5rem;white-space:pre-wrap}
        h1,.question{font-family:'Montserrat',sans-serif;font-weight:700;color:#64ffda;text-shadow:0 0 10px rgba(100,255,218,.5)}
        h1{font-size:2.5rem;margin-bottom:2rem}
        .question{font-size:1.8rem;margin-top:3rem;margin-bottom:2rem}
        .buttons{display:flex;justify-content:center;gap:1.5rem;position:relative}
        .btn{padding:1rem 2.5rem;border:none;border-radius:50px;font-family:'Montserrat',sans-serif;font-weight:700;font-size:1.1rem;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(0,0,0,.2)}
        #yesBtn{background-color:#64ffda;color:#0a192f}
        #yesBtn:hover{transform:translateY(-3px);box-shadow:0 7px 20px rgba(100,255,218,.4);background-color:#79ffe1}
        #noBtn{background-color:#ff6b6b;color:#fff;position:absolute}
        #timer-container h2{font-family:'Montserrat',sans-serif;font-size:2.2rem;color:#ffd700;text-shadow:0 0 10px rgba(255,215,0,.5);margin-bottom:2rem}
        .timer-display{display:flex;justify-content:center;align-items:center;gap:1rem;flex-wrap:wrap}
        .time-block{display:flex;flex-direction:column;align-items:center}
        .time-block .number{font-family:'Montserrat',sans-serif;font-size:2.5rem;font-weight:700;color:#fff;background-color:rgba(100,255,218,.1);padding:.8rem 1rem;border-radius:10px;min-width:60px}
        .time-block .label{font-family:'Lora',serif;margin-top:.5rem;font-size:.9rem;color:#e6f1ff;text-transform:uppercase}
        @media (max-width: 600px){h1{font-size:2rem}.question{font-size:1.5rem}#timer-container h2{font-size:1.8rem}.time-block .number{font-size:1.8rem;min-width:40px;padding:.6rem .8rem}.timer-display{gap:.5rem}}
        .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(10,25,47,.85);display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;transition:opacity .3s ease-in-out;pointer-events:none}
        .modal-overlay:not(.hidden){opacity:1;pointer-events:auto}
        .modal-content{background-color:#0a192f;padding:2.5rem 3rem;border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.4);border:1px solid rgba(100,149,237,.3);text-align:center;max-width:500px;width:90%;color:#e6f1ff;transform:scale(.9);transition:transform .3s ease-in-out}
        .modal-overlay:not(.hidden) .modal-content{transform:scale(1)}
        .modal-content h2{font-family:'Montserrat',sans-serif;color:#64ffda;font-size:2rem;margin-top:0}
        .modal-content p{font-family:'Lora',serif;font-size:1.1rem;line-height:1.8}
        .modal-btn{padding:.8rem 2rem;border:1px solid #ff6b6b;border-radius:50px;font-family:'Montserrat',sans-serif;font-weight:700;font-size:1rem;cursor:pointer;transition:all .3s ease;background-color:transparent;color:#ff6b6b;margin-top:1.5rem}
        .modal-btn:hover{background-color:rgba(255,107,107,.1)}
    </style>
</head>
<body>
    <div class="star-field"></div>
    <div class="airplane">
        <div class="tail-vertical"></div> <div class="tail-horizontal"></div> <div class="fuselage"></div> <div class="left-wing"></div> <div class="right-wing"></div> <div class="cockpit"></div>
    </div>
    <div class="container">
        <div id="loading-container">
            <p>Carregando nossa história...</p>
        </div>
        <div id="proposal-container" class="hidden">
            <h1>Para a minha Piloto</h1>
            <div class="content"><p>Eu sempre te admirei, de longe ou de perto, mas foi me aproximando de você que eu entendi o quão especial você é. A cada dia que passa, eu me apaixono mais por descobrir quem você é. E quando eu te chamo de perfeita, quero que entenda: não é por você ser impecável. É porque a sua perfeição, pra mim, está justamente na sua mistura única de qualidades, manias e até dos seus 'defeitos'. É essa combinação que te faz ser você. E é por você que eu sou apaixonado. O nosso encaixe faz mais sentido que qualquer peça de Lego ou quebra-cabeça. Eu me apaixono cada dia mais pela pessoa que você é, em cada detalhe, em cada sorriso, em cada conversa eu sinto que você é a minha pessoa. Eu tenho certeza que a gente pode construir um futuro incrível juntos, onde possamos sempre se apoiar e crescer lado a lado. Enquanto você estuda para conquistar os céus, eu estarei aqui em terra firme, te sentido no meu coração onde você estiver. Para cada passo que você der em direção aos seus sonhos, pode contar com meu coração aplaudindo de pé. Saber que você está buscando seus sonhos me inspira e me enche de um orgulho que mal cabe no peito. A ideia de poder comemorar cada uma de suas vitórias ao seu lado é o que move meu coração. Sou seu maior fã, hoje e sempre. Por tudo isso, e por tudo que ainda vamos descobrir juntos, eu queria te fazer a pergunta mais importante de todas: você aceita começar a escrever essa história comigo e ser minha namorada?</p></div>
            <div class="question">Você quer namorar comigo?</div>
            <div class="buttons"><button id="yesBtn" class="btn">Sim!</button><button id="noBtn" class="btn">Não</button></div>
        </div>
        <div id="timer-container" class="hidden">
            <h2>Nosso Tempo Juntos</h2>
            <div class="timer-display">
                <div class="time-block"><span class="number" id="anos">0</span><span class="label">Anos</span></div>
                <div class="time-block"><span class="number" id="meses">0</span><span class="label">Meses</span></div>
                <div class="time-block"><span class="number" id="dias">0</span><span class="label">Dias</span></div>
                <div class="time-block"><span class="number" id="horas">0</span><span class="label">Horas</span></div>
                <div class="time-block"><span class="number" id="minutos">0</span><span class="label">Minutos</span></div>
                </div>
        </div>
    </div>

    <div id="pilot-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Mensagem do Piloto</h2>
            <p>
                Atenção, senhores passageiros, boa noite! Em nome da Larucci & Bezerra Airlines, damos início ao embarque do "Nosso Ponto de Partida". Pedimos que afivelem os cintos, relaxem em seus assentos e aproveitem, pois o cronômetro do nosso futuro acaba de ser ligado.
            </p>
            <button id="close-modal-btn" class="modal-btn">Fechar</button>
        </div>
    </div>

    <script>
        // ★★★ URL DO APP DA WEB DO GOOGLE APPS SCRIPT ★★★
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzDC_enXvi20gnhwKS1STOXh7ZQnFid10ZlBCNP52Z8-hMej1VuD934GYZqCbTyOKXg/exec";

        const loadingContainer = document.getElementById('loading-container');
        const proposalContainer = document.getElementById('proposal-container');
        const timerContainer = document.getElementById('timer-container');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        let timerInterval; 

        function iniciarContador(dataInicioISO) {
            if (!dataInicioISO) return;
            if (timerInterval) clearInterval(timerInterval);

            const dataInicio = new Date(dataInicioISO);

            const atualizarContador = () => {
                const agora = new Date();
                const diff = agora - dataInicio;

                let anos = agora.getFullYear() - dataInicio.getFullYear();
                let meses = agora.getMonth() - dataInicio.getMonth();
                let dias = agora.getDate() - dataInicio.getDate();

                if (dias < 0) {
                    meses--;
                    dias += new Date(agora.getFullYear(), agora.getMonth(), 0).getDate();
                }

                if (meses < 0) {
                    anos--;
                    meses += 12;
                }

                const msPorDia = 1000 * 60 * 60 * 24;
                const horas = Math.floor((diff % msPorDia) / (1000 * 60 * 60));
                const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

                document.getElementById('anos').textContent = anos;
                document.getElementById('meses').textContent = meses;
                document.getElementById('dias').textContent = dias;
                document.getElementById('horas').textContent = horas.toString().padStart(2, '0');
                document.getElementById('minutos').textContent = minutos.toString().padStart(2, '0');
                
            };

            atualizarContador(); 

            timerInterval = setInterval(atualizarContador, 60000);
        }

        function mostrarTela(tela) {
            loadingContainer.classList.add('hidden');
            proposalContainer.classList.add('hidden');
            timerContainer.classList.add('hidden');
            
            if (tela === 'timer') {
                timerContainer.classList.remove('hidden');
            } else if (tela === 'proposal') {
                proposalContainer.classList.remove('hidden');
            } else {
                loadingContainer.classList.remove('hidden');
            }
        }

        yesBtn.addEventListener('click', () => {
            mostrarTela('loading');
            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
            })
            .then(() => {
                verificarStatus();
            })
            .catch(error => console.error('Erro ao salvar:', error));
        });
        
        function verificarStatus() {
            fetch(SCRIPT_URL)
            .then(res => res.json())
            .then(data => {
                if (data.timestamp && data.timestamp !== "") {
                    mostrarTela('timer');
                    iniciarContador(data.timestamp);
                } else {
                    mostrarTela('proposal');
                }
            }).catch(error => {
                console.error('Erro ao buscar status:', error);
                mostrarTela('proposal');
            });
        }
        
        noBtn.addEventListener('mouseover', () => {
             const containerRect = document.querySelector('.container').getBoundingClientRect();
             const btnRect = noBtn.getBoundingClientRect();
             noBtn.style.left = `${Math.floor(Math.random() * (containerRect.width - btnRect.width))}px`;
             noBtn.style.top = `${Math.floor(Math.random() * (containerRect.height - btnRect.height))}px`;
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            const starField = document.querySelector('.star-field');
            for (let i = 0; i < 250; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 3}s`;
                star.style.animationDuration = `${Math.random() * 2 + 2}s`;
                starField.appendChild(star);
            }

            const airplane = document.querySelector('.airplane');
            const pilotModal = document.getElementById('pilot-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');

            if (airplane && pilotModal && closeModalBtn) {
                airplane.addEventListener('click', () => {
                    pilotModal.classList.remove('hidden');
                });
                closeModalBtn.addEventListener('click', () => {
                    pilotModal.classList.add('hidden');
                });
                pilotModal.addEventListener('click', (event) => {
                    if (event.target === pilotModal) {
                        pilotModal.classList.add('hidden');
                    }
                });
            }

            verificarStatus();
        });
    </script>
</body>
</html>